---
  - hosts: all
    become: true
    tasks:
    - name: Check the remote host uptime
        register: uptimeoutput
        command: "uptime"

      - debug:
          var: uptimeoutput.stdout_lines
          
    - name: Copying jar to remote EC2 container
        copy:
          src: ../dwptest/target/dwptest-0.0.1-SNAPSHOT.jar
          dest: /home/ec2-user
          owner: ec2-user
          group: ec2-user
          mode: 0644
          
    - name: Create yum repository for docker
      yum_repository:
        name: docker-repo
        description: "repo for docker"
        baseurl:  "https://download.docker.com/linux/centos/7/x86_64/stable/"
        enabled: yes
        gpgcheck: no
      when: ansible_fajcts['os_family'] == 'RedHat'
          
  
