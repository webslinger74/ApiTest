---
  - hosts: all
    become: true
    tasks:
    - name: Check the remote host uptime
      register: uptimeoutput
      command: "uptime"

    - debug:
        var: uptimeoutput.stdout_lines
          
    - name: Copying jar to remote EC2 container
      copy:
        src: ../dwptest/target/dwptest-0.0.1-SNAPSHOT.jar
        dest: /home/ec2-user
        owner: ec2-user
        group: ec2-user
        mode: 0644
          
    - name: Update all packages
      yum: 
        name: '*'
        state: latest
        update_only: yes
          
    - name: Ensure a list of yum packages are installed
      yum:
        name: "{{ packages }}"
        state: latest
        update_cache: yes
      vars:
        packages:
        - python-pip
        - yum-utils
        - device-mapper-persistent-data
        - lvm2
        - amazon-linux-extras
          
  
